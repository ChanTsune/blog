---
title: "[c++] ちょっとカッコいい数値の符号判別"
date: 2019-08-23T05:45:48+00:00
lastmod: 2019-08-23T05:45:48+00:00
draft: false
categories: []
tags: ["c++","c/c++"]
# weight: 1935
---
c/c++で数値の符号を判定したい。  

頻繁に使うので関数にしたい。

ぱっと思いつく範囲では、
「条件分岐」か「絶対値で除算」するくらいだと思います。

Cで書くなら  
```c
// if で条件分岐
double sign(double n) {
    if(n > 0) return 1;
    else if(n < 0) return -1;
    else return 0;
}
```

```c
// 絶対値で除算
double sign(double n) {
    if (n == 0) return 0;
    else return n / abs(n);
}
```

大抵の場合はこんな感じになると思います。  

それでは、ちょっとカッコいい書き方！

```c
double sign(double n) {
    return (n > 0) - (n < 0);
}
```

`n > 0`と`n < 0`の部分で真偽値がそれぞれ返されるので、`n`が正なら`1 - 0 = 1`、負なら`0 - 1 =  -1`、`0`なら`0 - 0 = 0`、というように正しく判定できます。  

C++ならテンプレートを使ってあげることでキャストのコストを減らすこともできます。(バイナリのサイズは少し大きくなるかもしれませんが...)  

```cpp
template<class T>
T sign(T n) {
    return (n > 0) - (n < 0);
}
```

可読性は多少、下がるかもしれませんが、短く書けて素敵です。

以上、ちょっとカッコいい数値の符号判定法でした。
